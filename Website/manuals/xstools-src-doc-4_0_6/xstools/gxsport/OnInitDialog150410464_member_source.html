<HTML>
<HEAD>
<TITLE>XSTOOLs Source Code - OnInitDialog</TITLE>
<script type="text/javascript" src="../../common/js.js" language="JavaScript"></script>
<script type="text/javascript" src="leftmenu.js" language="JavaScript"></script>
<script type="text/javascript">
 var relPathToCommmon = "../../common/";
 var relPathToHelpDir = "../../common/help/";
 var toSearchPage     = "_search','../../search";
 Body1();
</script>
<div class="headerPage">OnInitDialog</div>
<div class="path"><a href="#" OnFocus="link('','../../index',this)" class="pathLink">XSTOOLs</A><img src="../../common/path-arrow.gif" class="path-arrow"><a href="#" OnFocus="link('_dir','gxsport0',this)" class="pathLink">gxsport</A><img src="../../common/path-arrow.gif" class="path-arrow"><a href="#" OnFocus="link('_class','CGxsportDlg0',this)" class="pathLink">CGxsportDlg</A><img src="../../common/path-arrow.gif" class="path-arrow"><span class="pathNonLink">OnInitDialog</span></div>
<script type="text/javascript">
 Body2();
 BodyLeftMenuStart();
WriteLeftMenu("","","","");
 BodyLeftMenuEnd();
 Body3();
</script>
<span class="tabInActive"><a href="#" OnFocus="linkTab('_member','OnInitDialog150410464','_description',this)" class="tabLinkInActive">Description</a></span>
<span class="tabActive"><a href="#" OnFocus="linkTab('_member','OnInitDialog150410464','_source',this)" class="tabLinkActive">Source</a></span>
<span class="tabInActive"><a href="#" OnFocus="linkTab('_member','OnInitDialog150410464','_callgraph',this)" class="tabLinkInActive">Call Graph</a></span>
<script type="text/javascript">
 Body4();
</script>
<div class="contentAirTop"></div>
<div class="paragraph2NoTopPadding">Start Line: 168</div>
<pre class="codeExamples">
virtual BOOL <a href="#" OnFocus="link('_member','OnInitDialog150410464',this)">CGxsportDlg::OnInitDialog</a>()
{
    CDialog::OnInitDialog();

    // Add "About..." menu item to system menu.

    // IDM_ABOUTBOX must be in the system command range.
    ASSERT((IDM_ABOUTBOX &amp; 0xFFF0) == IDM_ABOUTBOX);
    ASSERT(IDM_ABOUTBOX &lt; 0xF000);

    CMenu* pSysMenu = GetSystemMenu(FALSE);
    if (pSysMenu != NULL)
    {
        CString strAboutMenu;
        strAboutMenu.LoadString(IDS_ABOUTBOX);
        if (!strAboutMenu.IsEmpty())
        {
            pSysMenu-&gt;AppendMenu(MF_SEPARATOR);
            pSysMenu-&gt;AppendMenu(MF_STRING, IDM_ABOUTBOX, strAboutMenu);
        }
    }

    // Set the icon for this dialog.  The framework does this automatically
    //  when the application's main window is not a dialog
    SetIcon(m_hIcon, TRUE);         // Set big icon
    SetIcon(m_hIcon, FALSE);        // Set small icon
    
    // TODO: Add extra initialization here

    // strobe button starts off disabled because there is no new data to output
    // to the parallel port
    <a href="#" OnFocus="link('_member','m_btnStrobe150410393',this)">m_btnStrobe</a>.EnableWindow(false);

    // place parallel port numbers into the list box
    <a href="#" OnFocus="link('_member','m_cmbLpt150410393',this)">m_cmbLpt</a>.AddString("LPT1");
    <a href="#" OnFocus="link('_member','m_cmbLpt150410393',this)">m_cmbLpt</a>.AddString("LPT2");
    <a href="#" OnFocus="link('_member','m_cmbLpt150410393',this)">m_cmbLpt</a>.AddString("LPT3");

    // get the last setting for the parallel port
    string lptNum;
    if((lptNum=<a href="#" OnFocus="link('_member','../xstoolslib/GetXSTOOLSParameter67554305',this)">GetXSTOOLSParameter</a>((string)"LPT")) == "")
    { // set the default value if no previous value exists
        if(<a href="#" OnFocus="link('_member','../xstoolslib/SetXSTOOLSParameter3292873876',this)">SetXSTOOLSParameter</a>((string)"LPT",(string)"LPT1") == false)
        {
            AfxMessageBox("LPT value was not set",MB_ICONSTOP);
            exit(0);
        }
        lptNum = <a href="#" OnFocus="link('_member','../xstoolslib/GetXSTOOLSParameter67554305',this)">GetXSTOOLSParameter</a>((string)"LPT");
        assert(lptNum != "");
    }
    <a href="#" OnFocus="link('_member','m_cmbLpt150410393',this)">m_cmbLpt</a>.SelectString(-1,(const char*)(lptNum.c_str()));

    // initialize the parallel port object
    <a href="#" OnFocus="link('_class','../xstoolslib/XSError0',this)">XSError</a> <a href="#" OnFocus="link('_member','../xsusb/errMsg0',this)">errMsg</a>(cerr); // setup error channel
    int <a href="#" OnFocus="link('_member','../xsatapi/portNum0',this)">portNum</a> = <a href="#" OnFocus="link('_member','m_cmbLpt150410393',this)">m_cmbLpt</a>.GetCurSel()+1;  // get parallel port number
    <a href="#" OnFocus="link('_member','parPort150410393',this)">parPort</a> = new <a href="#" OnFocus="link('_class','../xstoolslib/PPort0',this)">PPort</a>(&amp;errMsg,portNum,0x03); // create parallel port object

    // initialize array of button pointers to the parallel port data buttons
    <a href="#" OnFocus="link('_member','dataBtn150410393',this)">dataBtn</a>[0] = &amp;<a href="#" OnFocus="link('_member','m_btnData0150410393',this)">m_btnData0</a>;
    <a href="#" OnFocus="link('_member','dataBtn150410393',this)">dataBtn</a>[1] = &amp;<a href="#" OnFocus="link('_member','m_btnData1150410393',this)">m_btnData1</a>;
    <a href="#" OnFocus="link('_member','dataBtn150410393',this)">dataBtn</a>[2] = &amp;<a href="#" OnFocus="link('_member','m_btnData2150410393',this)">m_btnData2</a>;
    <a href="#" OnFocus="link('_member','dataBtn150410393',this)">dataBtn</a>[3] = &amp;<a href="#" OnFocus="link('_member','m_btnData3150410393',this)">m_btnData3</a>;
    <a href="#" OnFocus="link('_member','dataBtn150410393',this)">dataBtn</a>[4] = &amp;<a href="#" OnFocus="link('_member','m_btnData4150410393',this)">m_btnData4</a>;
    <a href="#" OnFocus="link('_member','dataBtn150410393',this)">dataBtn</a>[5] = &amp;<a href="#" OnFocus="link('_member','m_btnData5150410393',this)">m_btnData5</a>;
    <a href="#" OnFocus="link('_member','dataBtn150410393',this)">dataBtn</a>[6] = &amp;<a href="#" OnFocus="link('_member','m_btnData6150410393',this)">m_btnData6</a>;
    <a href="#" OnFocus="link('_member','dataBtn150410393',this)">dataBtn</a>[7] = &amp;<a href="#" OnFocus="link('_member','m_btnData7150410393',this)">m_btnData7</a>;

    // display the parallel port data on the buttons
    <a href="#" OnFocus="link('_member','newPortDataVal150410393',this)">newPortDataVal</a> = <a href="#" OnFocus="link('_member','parPort150410393',this)">parPort</a>-&gt;<a href="#" OnFocus="link('_member','../xstoolslib/In1210046855',this)">In</a>(0,7);
    <a href="#" OnFocus="link('_member','DisplayBtnData4245494786',this)">DisplayBtnData</a>(newPortDataVal);

    return TRUE;  // return TRUE  unless you set the focus to a control
}
</pre><div class="contentAirBottom"></div>
<script type="text/javascript">
 Body5();
Statistics("","","","","");
 Body6();
SetPageTab('_member','_source');
</script>
